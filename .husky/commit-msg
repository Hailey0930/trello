#!/usr/bin/env sh
# $0 : í˜„ì¬ ì‹¤í–‰ ì¤‘ì¸ ìŠ¤í¬ë¦½íŠ¸ì˜ ê²½ë¡œë¥¼ ë‚˜íƒ€ë‚¸ë‹¤. husky ì„¤ì • ìŠ¤í¬ë¦½íŠ¸ë¥¼ ë¡œë“œí•˜ëŠ” ë° ì‚¬ìš©
. "$(dirname -- "$0")/_/husky.sh"

# $1 : ìŠ¤í¬ë¦½íŠ¸ì— ì „ë‹¬ëœ ì²« ë²ˆì§¸ ì¸ìë¡œ, ì»¤ë°‹ ë©”ì‹œì§€ê°€ ì €ì¥ëœ íŒŒì¼ì˜ ê²½ë¡œ
COMMIT_MESSAGE_FILE=$1
COMMIT_MESSAGE=$(cat "$COMMIT_MESSAGE_FILE")

# emojiê°€ ì œì¼ ì²˜ìŒì— ë“¤ì–´ì˜¤ë„ë¡ ì„¤ì •
if ! echo "$COMMIT_MESSAGE" | grep -qE "^:[^ ]+:.+"; then
  echo "ğŸ’• Please use gitmoji in your commit message"
  exit 1
fi
  # emoji ë‹¤ìŒ ì²« ê¸€ìëŠ” ëŒ€ë¬¸ìê°€ ì˜¤ë„ë¡ ì„¤ì •
if ! echo "$COMMIT_MESSAGE" | grep -qE "^:[^ ]+: [A-Z].+"; then
  echo "ğŸ’¥ The first letter after the emoji must be capitalized"
  exit 1
fi

echo "ğŸ”† Thanks for keeping the convention ğŸ”†"
